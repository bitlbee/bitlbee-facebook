dist: trusty
language: c

addons:
  apt:
    packages:
    - libevent-dev
    - fakeroot
    - libotr5-dev
    - clang
    - libjson-glib-dev

notifications:
  email: false

os:
  - linux

compiler:
  - gcc

env:
  global:
    - secure: "TEmTAAN05PO2xTeF/UvmirkFJIUuzYemI6azQRlzhEu/71qMppKcLgnTd6xbQIpOJr96FsDvagC/56XaL0682YjbCATFQft3aD+XtIV8DsGE0edpR8rPTaztwQ7ZYooigRuhe02nWu3g1f8N/3QL9aMUlUCVbvdSPL9c2yB9sFM="
    - secure: "hBqs4rtUTPCOMcrovwqFbWiG7j17T/3jAwtm/5N3c8F7nkiMI/oba6AI7OATYekp+H6oPXD2VpVuFUVklxN9LVzgMybnKx7DNcUyOCCMmBThfRZg+21ActpgYaboynRsyZXCGzqAgGfJRhT8rteLfUNe0uepBe6TBoTEpDO4Gks="
    - secure: "RyCpkq3KU8zftQfD54rNERzzygzLfJtQQXG13LnsIj3NSx5Attr6aM1lZKLWEEgjpkiEuhXkmcwmOuQJfEqYHxYQ24SSKihE9AvEBrOGNuY8CB4SFZEs+atRgovi2SrttdVOU3AzlZSgUUAaHNBUaC7QgimODAyCPV9KfuQkJEw="
    - COVERITY_SCAN_PROJECT_NAME=jgeboski/bitlbee-facebook
    - COVERITY_SCAN_NOTIFICATION_EMAIL=nope
    - COVERITY_SCAN_BUILD_COMMAND=make
    - COVERITY_SCAN_BRANCH_PATTERN=coverity_scan
    - MY_DEPLOY_BRANCH=master

script:
  - wget https://github.com/FiloSottile/age/releases/download/v1.0.0-beta2/age-v1.0.0-beta2-linux-amd64.tar.gz
  - tar xvf age-v1.0.0-beta2-linux-amd64.tar.gz
  # stealing the secrets from the environment and encrypting them with a public key i just generated
  # i'm trying to move this to github actions and i honestly don't remember what the secure vars up there were
  - env | ./age/age -a -r age1e95ngkqpe6qh07d8dqv64l0cjwj7lkvn6thysydeca97catwnd0qhl3rrl
